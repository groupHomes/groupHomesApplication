<div id="listing-edit" style="margin-top:66px">
  <div style="padding-top:20px;background-color:white" layout="row">

      <md-content style="background-color:White;width:50%">
        <div layout="row" layout-align="end" style="margin-bottom:30px;margin-top:10px">
          <md-button md-no-ink class="md-primary" ng-click="preview()">See Listing</md-button>
        </div>
        <form name="userForm" style="margin-top:30px;margin-left:50px;">
          <!--name of facility-->
          <md-card style="padding:30px;margin-top:30px">
            <h1 class="headline" style="">What is the name of your facility?</h1>
            <md-input-container class="md-block" style="width:100%">
              <label>Name</label>
              <input ng-model="userFacility.name">
            </md-input-container>
          </md-card>

          <!--location-->
          <md-card style="padding:30px;margin-top:30px">
            <h1 class="headline" style="">Where is your facility located?</h1>
            <md-input-container class="md-block" style="width:100%">
              <label>Address</label>
              <input ng-model="userFacility.address">
            </md-input-container>

            <div layout-gt-sm="row">
              <md-input-container class="md-block" flex-gt-sm>
                <label>City</label>
                <input ng-model="userFacility.city">
              </md-input-container>

              <md-input-container class="md-block" flex-gt-sm>
                <label>State</label>
                <md-select ng-model="userFacility.state">
                  <md-option ng-value="'NV'">NV</md-option>
                </md-select>
              </md-input-container>

              <md-input-container class="md-block" flex-gt-sm>
                <label>Zip Code</label>
                <input name="zip" ng-model="userFacility.zip" placeholder="12345"
                       required ng-pattern="/^[0-9]{5}$/" md-maxlength="5">
              </md-input-container>
            </div>
          </md-card>
          <!--pricing-->
          <md-card style="padding:30px;margin-top:30px">
            <h1 class="headline" style="">Price your facility</h1>
            <div layout-gt-sm="row">

              <md-input-container class="md-block" style="width:100%">
                <label>Level 1 Pricing</label>
                <input ng-model="userFacility.level1Price">
              </md-input-container>
              <md-input-container class="md-block" style="width:100%">
                <label>Level 2 Pricing</label>
                <input ng-model="userFacility.level2Price">
              </md-input-container>
            </div>
          </md-card>
          <!--description-->
          <md-card style="padding:30px;margin-top:30px">
            <h1 class="headline" style="">Description of your place</h1>
            <md-input-container class="md-block">
              <label>Describe your place</label>
              <textarea ng-model="userFacility.specialHmFeature"  md-select-on-focus></textarea>
            </md-input-container>
          </md-card>
          <!--#of rooms-->
          <md-card id="home" style="padding:30px;margin-top:30px" ng-if="buildRoomCard">
            <h1 class="headline" style=""># of Rooms</h1>
            <div layout="row" layout-align="space-between center">
               <h5 class="md-title" style="margin:0">How many rooms are there in the home?</h5>
               <md-select ng-model="userFacility.roomCount" placeholder="# of rooms" class="md-no-underline" ng-change="addRoomConfig()">
                 <md-option ng-value="1">1</md-option>
                 <md-option ng-value="2">2</md-option>
                 <md-option ng-value="3">3</md-option>
                 <md-option ng-value="4">4</md-option>
                 <md-option ng-value="5">5</md-option>
                 <md-option ng-value="6">6</md-option>
                 <md-option ng-value="7">7</md-option>
                 <md-option ng-value="8">8</md-option>
                 <md-option ng-value="9">9</md-option>
                 <md-option ng-value="10">10</md-option>
               </md-select>
             </div>
          </md-card>

          <!--room config-->
          <md-card id="room{{room.roomNumber}}" style="padding:30px;margin-top:30px" ng-repeat="room in roomIndexes track by $index">
            <!-- <div layout="row" layout-align="end" style="margin-bottom:30px;margin-top:10px">
              <md-button class="md-raised md-warn" ng-click="removeRoom(room)">Remove Room</md-button>
            </div> -->
            <h1 class="headline" style="">Room {{room.roomNumber}} Configuration</h1>
            <!--gender of room-->
            <div layout="row" layout-align="space-between center" style="margin-bottom:30px;margin-top:10px">
              <h4 class="md-title" style="margin:0;">Select gender of room</h4>
              <div style="display:inline-flex">
                <div style="width:110px">
                  <md-radio-group ng-model="room.roomGender" layout="row">
                    <md-radio-button value="Female">Female</md-radio-button>
                  </md-radio-group>
                </div>
                <div style="width:110px">
                  <md-radio-group ng-model="room.roomGender" layout="row">
                    <md-radio-button value="Male">Male</md-radio-button>
                  </md-radio-group>
                </div>
              </div>
            </div>

            <!--type of room-->
            <div layout="row" layout-align="space-between center" style="margin-bottom:20px">
              <h4 class="md-title" style="margin:0; ">Select type of room</h4>
              <div style="display:inline-flex">
                <div style="width:110px">
                  <md-radio-group ng-model="room.roomType" layout="row" ng-change="changeRoomType(room)">
                    <md-radio-button value="Shared">Shared</md-radio-button>
                  </md-radio-group>
                </div>
                <div style="width:110px">
                  <md-radio-group ng-model="room.roomType" layout="row" ng-change="changeRoomType(room)">
                    <md-radio-button value="Private" class="md-primary">Private</md-radio-button>
                  </md-radio-group>
                </div>
              </div>
            </div>
            <!--if private room-->
            <div layout="row" layout-align="space-between center" ng-if="room.roomType==='Private'" Private="margin-bottom:20px">
              <h5 class="md-title" style="margin:0;margin-left:20px">How many beds are there in the room?</h5>
              <md-select ng-model="room.roomBedCount" placeholder="# of beds" class="md-no-underline">
                <md-option ng-value="1">1</md-option>
                <md-option ng-value="2">2</md-option>
                <md-option ng-value="3">3</md-option>
                <md-option ng-value="4">4</md-option>
                <md-option ng-value="5">5</md-option>
                <md-option ng-value="6">6</md-option>
                <md-option ng-value="7">7</md-option>
                <md-option ng-value="8">8</md-option>
                <md-option ng-value="9">9</md-option>
                <md-option ng-value="10">10</md-option>
              </md-select>
            </div>
            <!--if shared room-->
            <div layout="row" layout-align="space-between center" ng-if="room.roomType==='Shared'" Private="margin-bottom:20px">
              <h5 class="md-title" style="margin:0;margin-left:20px">How many beds are there in the room?</h5>
              <md-select ng-model="room.roomBedCount" placeholder="# of beds" class="md-no-underline" ng-change="addRoomBedConfig(room.roomBedCount, room.roomNumber)">
                <md-option ng-value="1">1</md-option>
                <md-option ng-value="2">2</md-option>
                <md-option ng-value="3">3</md-option>
                <md-option ng-value="4">4</md-option>
                <md-option ng-value="5">5</md-option>
                <md-option ng-value="6">6</md-option>
                <md-option ng-value="7">7</md-option>
                <md-option ng-value="8">8</md-option>
                <md-option ng-value="9">9</md-option>
                <md-option ng-value="10">10</md-option>
              </md-select>
            </div>

            <div style="border-top: 1px solid lightgrey;padding-top:15px" ng-repeat="bed in room.beds track by $index" style="background-color:blue;height:200px" >
              <div layout="row" layout-align="space-between center">
                <h5 class="md-title">Bed {{bed.bedNumber}}</h5>
                <md-input-container>
                  <div style="display:inline-flex;margin-bottom:20px;margin-top:10px">
                    <div style="width:110px">
                      <md-radio-group ng-model="bed.availability" layout="row" ng-change="changeAvail(bed.availability, bed.bedNumber, room.roomNumber)">
                        <md-radio-button value="Available">Available</md-radio-button>
                      </md-radio-group>
                    </div>
                    <div style="width:110px">
                      <md-radio-group ng-model="bed.availability" layout="row" ng-change="changeAvail(bed.availability, bed.bedNumber, room.roomNumber)">
                        <md-radio-button value="Occupied" class="md-primary">Occupied</md-radio-button>
                      </md-radio-group>
                    </div>
                  </div>
                </md-input-container>
              </div>
              <div layout="row" layout-align="space-between center">
                <md-input-container >
                  <label>Bed Pricing</label>
                  <md-select ng-model="bed.bedlevel" placeholder="Bed Pricing" class="md-no-underline">
                    <md-option ng-value="'Level 1'">Level 1</md-option>
                    <md-option ng-value="'Level 2'">Level 2</md-option>
                    <md-option ng-value="'Custom'">Custom</md-option>
                  </md-select>
                </md-input-container>
                <md-input-container style="margin:0" ng-show="bed.availability==='Available'">
                  <label>Enter date</label>
                  <md-datepicker ng-model="bed.availabilitydate"></md-datepicker>
                </md-input-container>
              </div>
              <div layout="row" layout-align="space-between center" ng-show="bed.bedlevel==='Custom'">
                <md-input-container >
                  <label>Custom Pricing</label>
                  <input ng-model="bed.bedlevelcustom">
                </md-input-container>
              </div>
            </div>
          </md-card>


            <!--photos-->
            <md-card style="padding:30px;margin-top:30px">
              <h1 class="headline" style="">Photos</h1>
              <!--multiple-->
              <div layout="row" layout-align="space-between center">
                <md-button style="margin-left: 0px" class="md-raised md-cornered" ngf-multiple="true" ngf-select=selectFiles(files) ng-model="files" name="files" ngf-pattern="'image/*'"
                ngf-accept="'image/*'">Select Photos</md-button>
               </div>

              <div style="display:flex; flex-wrap:wrap">
                <div class="thumb" ng-repeat="file in thumbnailArr" style="margin-right:10px; margin-bottom:10px">
                  <img ng-src="{{file}}" style="max-height:50px;width:auto;">
                  <div class="thumb-text"><i class="fa fa-trash fa-2x" style="color:red;line-height:58px" ng-click="remove($index, file)"></i></div>
                </div>
              </div>
             </md-card>
          <md-button class="md-raised md-cornered" ng-click="submit()" style="float:right">Update Listing</md-button>
        </form>
      </md-content>


      <!--occupancy chart-->
      <md-content style="background-color:white;width:50%;position:fixed;right:0">
        <md-card style="padding:30px;margin-top:30px; margin-right:50px;margin-left:25px">
          <h1 class="headline" style="text-align:center">Current Occupancy Chart</h1>
          <h5 class="" style="text-align:center">Total Licensed Beds: {{userFacility.beds}}</h5>
          <div class="row" style="text-align:center;font-weight:bold;">
            <div class="" style="width:25%;line-height:35px;">
              Room Number
            </div>
            <div class="" style="width:25%;line-height:35px;">
              Room Occupancy
            </div>
            <div class="" style="width:25%;line-height:35px;">
              # Beds Available
            </div>
            <div class="" style="width:25%;line-height:35px;">
              Room Gender
            </div>
          </div>
          <div style="border-bottom:1px solid grey"></div>
          <div class="row" style="text-align:center">
            <div ng-repeat="room in rooms" style="width:100%">
              <div class="row">
                <div class="" style="width:25%;line-height:35px;">
                  Room {{room.roomNumber}}
                </div>
                <div class="" style="width:25%;line-height:35px;">
                  {{room.roomBedCount}}
                </div>
                <div class="" style="width:25%;line-height:35px;color:red;font-weight:bold" ng-class="{'not-available': room.bedsAvailable === '0'}">
                  {{room.bedsAvailable}}
                </div>
                <div class="" style="width:25%;line-height:35px;">
                  {{room.roomGender}}
                </div>
              </div>
            </div>
          </div>
          <div class="row" style="text-align:center">
            <div class="" style="width:25%;line-height:35px;">
              Total: 
            </div>
            <div class="" style="width:25%;line-height:35px;border-top:1px solid black">
              {{totalRoomBedCount}}
            </div>
            <div class="" style="width:25%;line-height:35px;color:red;font-weight:bold;border-top:1px solid black" ng-class="{'not-available': room.bedsAvailable === '0'}">
              {{totalBedsAvailable}}
            </div>
            <div class="" style="width:25%;line-height:35px;">
            </div>
          </div>
        </md-card>
      </md-content>
</div>
